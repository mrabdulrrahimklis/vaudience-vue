<template>
  <div v-if="this.hideShow" class="width-200">
    <span class="home">66%</span>
    <span class="ball-possession">BALL POSSESSION %</span>
    <span class="away">34%</span>
  </div>
  <section class="center-video">
    <div
      @mouseleave="
        this.hideShow = false;
        this.overlay = false;
      "
      @mouseover="
        this.hideShow = true;
        this.overlay = true;
      "
    >
      <video id="video" width="400" controls>
        <source src="./../assets/videos/mov_bbb.mp4" type="video/mp4" />
      </video>
      <div v-if="this.overlay" id="overlay">vAudience</div>
      <div @click="confetti()" id="overlay-heart-icon">
        <i class="fas fa-heart"></i>
      </div>
    </div>
  </section>
  <div class="logout-button-style">
    <button id="logout" @click="this.logout">Logout</button>
  </div>
  <div v-if="this.celebrate">
    <div class="container">
      <svg
        id="svg"
        width="216px"
        height="148px"
        viewBox="0 0 216 148"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
      >
        <defs>
          <linearGradient
            x1="49.2611725%"
            y1="102.777859%"
            x2="43.7323173%"
            y2="22.0530861%"
            id="confettiBox-linearGradient-1"
          >
            <stop stop-color="#FFFFFF" offset="0%"></stop>
            <stop stop-color="#D4EFEF" offset="100%"></stop>
          </linearGradient>
        </defs>
        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <g class="all-confetti" width="100">
            <rect
              class="confettiBox-confetti-1"
              fill="#7DCED0"
              transform="translate(4.465050, 52.419341) rotate(-40.230000) translate(-4.465050, -52.419341) "
              x="2.00505043"
              y="49.9593408"
              width="4.92"
              height="4.92"
            ></rect>
            <rect
              class="confettiBox-confetti-2"
              fill="#7DCED0"
              transform="translate(167.086620, 51.473379) rotate(-47.980000) translate(-167.086620, -51.473379) "
              x="164.62662"
              y="49.0133791"
              width="4.92"
              height="4.92"
            ></rect>
            <rect
              class="confettiBox-confetti-3"
              fill="#FFE28B"
              transform="translate(189.288923, 23.611860) rotate(-30.000000) translate(-189.288923, -23.611860) "
              x="186.828923"
              y="21.1518598"
              width="4.92"
              height="4.92"
            ></rect>
            <polygon
              class="confettiBox-confetti-4"
              fill="#FBCDCA"
              points="146.82 19.74 137.74 16.41 143.95 13.53"
            ></polygon>
            <polygon
              class="confettiBox-confetti-5"
              fill="#A8DEE0"
              points="61.05 31.22 58.52 21.88 64.46 25.29"
            ></polygon>
            <polygon
              class="confettiBox-confetti-6"
              fill="#FBCDCA"
              points="53.76 54.85 61.49 49.03 60.53 55.8"
            ></polygon>
            <polygon
              class="confettiBox-confetti-7"
              fill="#FDE6E5"
              points="210.07 61.65 215.26 53.49 216.75 60.17"
            ></polygon>
            <polygon
              class="confettiBox-confetti-8"
              fill="#FFE28B"
              points="38.86 26.42 36.6 35.82 33.02 29.99"
            ></polygon>
            <polygon
              class="confettiBox-confetti-9"
              fill="#A8DEE0"
              points="154.55 81.29 152.29 90.7 148.72 84.86"
            ></polygon>
            <polygon
              class="confettiBox-confetti-10"
              fill="#FFE28B"
              points="95.23 9.12 85.75 11.02 89.54 5.33"
            ></polygon>
            <path
              class="confettiBox-confetti-11"
              d="M66,72.42 C66.2893798,70.9577598 67.2751656,69.7292615 68.64,69.13 L69.64,71.13 C68.8819423,71.3926259 68.326945,72.0470768 68.1916806,72.8378533 C68.0564162,73.6286297 68.3623329,74.4303422 68.99,74.93 C70.1073365,75.9332895 70.6312718,77.440001 70.3774865,78.9200766 C70.1237013,80.4001521 69.1277476,81.6462517 67.74,82.22 C66.9895195,82.4841923 66.4401596,83.1330014 66.3033114,83.9167687 C66.1664631,84.7005359 66.4634527,85.4971203 67.08,86 C68.1587915,87.0327565 68.6758921,88.520816 68.47,90 C68.1774547,91.460764 67.1927075,92.687968 65.83,93.29 L64.83,91.29 C65.5929948,91.0327912 66.153313,90.3776402 66.2890697,89.5839856 C66.4248264,88.7903311 66.114124,87.9861897 65.48,87.49 C64.3940117,86.4618789 63.8755874,84.9700104 64.09,83.49 C64.3825453,82.029236 65.3672925,80.802032 66.73,80.2 C67.4929948,79.9427912 68.053313,79.2876402 68.1890697,78.4939856 C68.3248264,77.7003311 68.014124,76.8961897 67.38,76.4 C66.3053254,75.3733517 65.7915367,73.8915554 66,72.42 Z"
              fill="#FFE28B"
            ></path>
            <path
              class="confettiBox-confetti-12"
              d="M123.79,2.3 C124.523977,1.00159769 125.845377,0.143061158 127.33,5.07371922e-16 L127.64,2.17 C126.850176,2.22375953 126.135001,2.65584394 125.72,3.33 C125.392709,4.05060481 125.433681,4.88492961 125.83,5.57 C126.539,6.88574654 126.561396,8.46467337 125.89,9.8 C125.156023,11.0984023 123.834623,11.9569388 122.35,12.1 C121.56221,12.1601578 120.849719,12.5906208 120.43,13.26 C120.102615,13.9840324 120.143551,14.8213551 120.54,15.51 C121.238998,16.8283275 121.261325,18.4023771 120.6,19.74 C119.864751,21.0372066 118.544047,21.8952916 117.06,22.04 L116.75,19.87 C117.539824,19.8162405 118.254999,19.3841561 118.67,18.71 C119.000439,17.9875596 118.963227,17.1502775 118.57,16.46 C117.859526,15.1454502 117.83341,13.5673381 118.5,12.23 C119.22853,10.9447397 120.531171,10.0887183 122,9.93 C122.819693,9.90557557 123.571775,9.46936797 124,8.77 C124.330342,8.05099361 124.293098,7.21670997 123.9,6.53 C123.176832,5.22200329 123.135792,3.64381499 123.79,2.3 Z"
              fill="#A8DEE0"
            ></path>
            <path
              class="confettiBox-confetti-13"
              d="M116.08,76.71 C116.408875,78.1678854 116.00575,79.694534 115,80.8 L113.31,79.4 C113.898066,78.853671 114.141913,78.0304271 113.946254,77.2519574 C113.750596,76.4734877 113.146492,75.8633652 112.37,75.66 C110.961096,75.1618628 109.882888,74.009039 109.48,72.57 C109.148391,71.119966 109.54813,69.5994632 110.55,68.5 C111.102668,67.9314547 111.341765,67.128237 111.19,66.35 C110.953636,65.5921973 110.36477,64.9958769 109.61,64.75 C108.20442,64.2523985 107.127218,63.1043769 106.72,61.67 C106.389322,60.2151858 106.792866,58.6906876 107.8,57.59 L109.48,58.99 C108.885228,59.5418434 108.644289,60.3772928 108.853865,61.1611057 C109.06344,61.9449187 109.689183,62.5486349 110.48,62.73 C111.911181,63.1904064 113.004194,64.3556718 113.372173,65.8133565 C113.740152,67.2710413 113.331176,68.8154699 112.29,69.9 C111.696538,70.4541896 111.456587,71.2902146 111.665806,72.0747852 C111.875024,72.8593557 112.499393,73.4648955 113.29,73.65 C114.657162,74.1631807 115.694932,75.3013804 116.08,76.71 Z"
              fill="#FBCDCA"
            ></path>
            <path
              class="confettiBox-confetti-14"
              d="M21.07,24.57 C20.4831635,23.1985467 20.6026161,21.6269995 21.39,20.36 L23.3,21.43 C22.8644749,22.0909238 22.7750812,22.9215396 23.06,23.66 C23.4389252,24.3540665 24.1261256,24.8258203 24.91,24.93 C26.3988337,25.1259543 27.6827717,26.0726235 28.3101284,27.4369722 C28.9374852,28.8013209 28.8203762,30.3922215 28,31.65 C27.5188998,32.2949995 27.4283163,33.1511967 27.763798,33.8825884 C28.0992797,34.6139801 28.8072978,35.1038672 29.61,35.16 C31.0736361,35.4059476 32.3325853,36.3343762 33,37.66 C33.5868365,39.0314533 33.4673839,40.6030005 32.68,41.87 L30.77,40.8 C31.2511002,40.1550005 31.3416837,39.2988033 31.006202,38.5674116 C30.6707203,37.8360199 29.9627022,37.3461328 29.16,37.29 C27.6829922,37.0642252 26.4096314,36.1306762 25.75,34.79 C25.1653697,33.4226919 25.2809581,31.8566561 26.06,30.59 C26.5411002,29.9450005 26.6316837,29.0888033 26.296202,28.3574116 C25.9607203,27.6260199 25.2527022,27.1361328 24.45,27.08 C22.9834374,26.8398357 21.7239038,25.9045016 21.07,24.57 Z"
              fill="#FBCDCA"
            ></path>
            <path
              class="confettiBox-confetti-15"
              d="M126.44,37.14 C125.429348,36.0724536 124.993948,34.5839072 125.27,33.14 L127.44,33.47 C127.259394,34.239736 127.464561,35.0492155 127.99,35.64 C128.587823,36.1596386 129.397216,36.3638433 130.17,36.19 C131.633201,35.8934139 133.149022,36.330239 134.23,37.36 C135.259761,38.4409781 135.696586,39.9567988 135.4,41.42 C135.173748,42.1918765 135.386775,43.025698 135.955539,43.5944613 C136.524302,44.1632247 137.358123,44.3762522 138.13,44.15 C139.591136,43.8611317 141.102023,44.2928137 142.19,45.31 C143.203607,46.3758471 143.639457,47.8659317 143.36,49.31 L141.2,49 C141.433597,48.2272269 141.223099,47.3886062 140.652247,46.8177535 C140.081394,46.2469007 139.242773,46.0364032 138.47,46.27 C137.003733,46.5665409 135.484946,46.1299364 134.4,45.1 C133.361935,44.0074993 132.924843,42.4758103 133.23,41 C133.412353,40.2302495 133.206982,39.4199652 132.68,38.83 C132.086345,38.3023542 131.27446,38.0937966 130.5,38.27 C129.043397,38.5770592 127.52852,38.1554308 126.44,37.14 Z"
              fill="#FDE6E5"
            ></path>
          </g>
        </g>
      </svg>
    </div>
  </div>
</template>

<script>
import store from "./../store";
import type from "@/store/types";

export default {
  data() {
    return {
      hideShow: false,
      celebrate: false,
      overlay: false,
      home: "",
      away: "",
    };
  },
  computed: {},
  watch: {
    hideShow: "getUserRepositories"
  },
  mounted() {
    this.getUserRepositories;
    const overlay = document.getElementById("overlay");
    const video = document.getElementById("video");

    video.addEventListener(
      "progress",
      function() {
        const show = video.currentTime >= 5 && video.currentTime < 10;
        overlay.style.visibility = show ? "visible" : "visible";
      },
      false
    );
  },
  methods: {
    getUserRepositories() {
      setInterval(
        function() {
          this.overlay = false;
        }.bind(this),
        1000
      );
    },
    confetti() {
      this.celebrate = true;
      setInterval(
        function() {
          this.celebrate = false;
        }.bind(this),
        3000
      );
    },
    logout() {
      this.$router.push("/");
      store.dispatch({
        type: type.IS_LOGGED,
        payload: false
      });
      store.dispatch({
        type: type.CURRENT_USER,
        payload: "Stranger"
      });
    }
  }
};
</script>
